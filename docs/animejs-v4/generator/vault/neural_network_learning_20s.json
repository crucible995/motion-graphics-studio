{
  "id": 1769309770139,
  "topic": "neural network learning",
  "duration": 20,
  "sequences": "dynamic",
  "timestamp": 1769309770139,
  "title": "How Neural Networks Learn",
  "narration": "Neural networks learn by sending signals through layers of neurons, adjusting the strength of connections based on errors. Like a sculptor refining clay, the network gradually shapes itself until it can recognize patterns and make predictions with remarkable accuracy.",
  "setup": "const neurons = [];\nconst connections = [];\nconst signals = [];\n\n// Create 3 layers of neurons\nconst layers = [\n  { count: 4, x: 150, color: '#4fc3f7' },\n  { count: 6, x: 400, color: '#a55eea' },\n  { count: 6, x: 650, color: '#a55eea' },\n  { count: 2, x: 900, color: '#26de81' }\n];\n\nlayers.forEach((layer, layerIndex) => {\n  const startY = (500 - (layer.count - 1) * 70) / 2;\n  for (let i = 0; i < layer.count; i++) {\n    const neuron = document.createElement('div');\n    neuron.className = 'element neuron layer-' + layerIndex;\n    neuron.style.cssText = `\n      position: absolute;\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: ${layer.color};\n      left: ${layer.x}px;\n      top: ${startY + i * 70}px;\n      opacity: 0;\n      transform: scale(0);\n      box-shadow: 0 0 20px ${layer.color}40;\n    `;\n    stage.appendChild(neuron);\n    neurons.push({ el: neuron, x: layer.x + 20, y: startY + i * 70 + 20, layer: layerIndex });\n  }\n});\n\n// Create connections between layers\nconst svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\nsvg.style.cssText = 'position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none;';\nstage.insertBefore(svg, stage.firstChild);\n\nneurons.forEach((n1, i) => {\n  neurons.forEach((n2, j) => {\n    if (n2.layer === n1.layer + 1) {\n      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      line.setAttribute('x1', n1.x);\n      line.setAttribute('y1', n1.y);\n      line.setAttribute('x2', n2.x);\n      line.setAttribute('y2', n2.y);\n      line.setAttribute('stroke', '#ffffff20');\n      line.setAttribute('stroke-width', '2');\n      line.classList.add('connection');\n      svg.appendChild(line);\n      connections.push({ el: line, from: n1, to: n2 });\n    }\n  });\n});\n\n// Create signal particles\nfor (let i = 0; i < 20; i++) {\n  const signal = document.createElement('div');\n  signal.className = 'element signal signal-' + i;\n  signal.style.cssText = `\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background: #fed330;\n    box-shadow: 0 0 15px #fed330;\n    opacity: 0;\n    transform: scale(0);\n    z-index: 10;\n  `;\n  stage.appendChild(signal);\n  signals.push(signal);\n}\n\n// Create labels\nconst inputLabel = document.createElement('div');\ninputLabel.className = 'element label input-label';\ninputLabel.textContent = 'INPUT';\ninputLabel.style.cssText = 'position: absolute; left: 120px; top: 420px; color: #4fc3f7; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(inputLabel);\n\nconst hiddenLabel = document.createElement('div');\nhiddenLabel.className = 'element label hidden-label';\nhiddenLabel.textContent = 'HIDDEN LAYERS';\nhiddenLabel.style.cssText = 'position: absolute; left: 460px; top: 420px; color: #a55eea; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(hiddenLabel);\n\nconst outputLabel = document.createElement('div');\noutputLabel.className = 'element label output-label';\noutputLabel.textContent = 'OUTPUT';\noutputLabel.style.cssText = 'position: absolute; left: 865px; top: 420px; color: #26de81; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(outputLabel);\n\n// Error indicator\nconst errorBar = document.createElement('div');\nerrorBar.className = 'element error-bar';\nerrorBar.style.cssText = 'position: absolute; right: 50px; top: 100px; width: 20px; height: 200px; background: #2d3436; border-radius: 10px; opacity: 0; overflow: hidden;';\nstage.appendChild(errorBar);\n\nconst errorFill = document.createElement('div');\nerrorFill.className = 'element error-fill';\nerrorFill.style.cssText = 'position: absolute; bottom: 0; left: 0; width: 100%; height: 90%; background: linear-gradient(to top, #26de81, #fed330, #ff6b9d); border-radius: 10px;';\nerrorBar.appendChild(errorFill);\n\nconst errorLabel = document.createElement('div');\nerrorLabel.className = 'element error-label';\nerrorLabel.textContent = 'ERROR';\nerrorLabel.style.cssText = 'position: absolute; right: 45px; top: 310px; color: #ff6b9d; font-size: 12px; font-weight: bold; opacity: 0; letter-spacing: 1px;';\nstage.appendChild(errorLabel);",
  "animation": "const tl = anime.createTimeline({\n  defaults: { ease: 'outExpo' }\n});\n\n// Phase 1: Neurons appear layer by layer\ntl.add({\n  targets: '.layer-0',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(80)\n}, 0);\n\ntl.add({\n  targets: '.layer-1',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(60)\n}, 400);\n\ntl.add({\n  targets: '.layer-2',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(60)\n}, 800);\n\ntl.add({\n  targets: '.layer-3',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(100)\n}, 1200);\n\n// Phase 2: Connections fade in\ntl.add({\n  targets: '.connection',\n  opacity: [0, 0.3],\n  duration: 800,\n  delay: anime.stagger(10)\n}, 1500);\n\n// Labels appear\ntl.add({\n  targets: '.input-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2000);\n\ntl.add({\n  targets: '.hidden-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2200);\n\ntl.add({\n  targets: '.output-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2400);\n\n// Phase 3: First forward pass - signals travel through network\nconst signalEls = document.querySelectorAll('.signal');\nlet signalIndex = 0;\n\n// Signals from input to first hidden\ntl.add({\n  targets: [signalEls[0], signalEls[1], signalEls[2], signalEls[3]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 380],\n  top: (el, i) => [80 + i * 70, 45 + i * 50],\n  duration: 800,\n  ease: 'linear'\n}, 3000);\n\n// Neurons pulse when receiving signal\ntl.add({\n  targets: '.layer-1',\n  scale: [1, 1.3, 1],\n  boxShadow: ['0 0 20px #a55eea40', '0 0 40px #a55eea80', '0 0 20px #a55eea40'],\n  duration: 400,\n  delay: anime.stagger(50)\n}, 3600);\n\n// Signals to second hidden\ntl.add({\n  targets: [signalEls[4], signalEls[5], signalEls[6], signalEls[7], signalEls[8], signalEls[9]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [380, 630],\n  top: (el, i) => [45 + i * 50, 45 + i * 50],\n  duration: 800,\n  ease: 'linear'\n}, 4000);\n\ntl.add({\n  targets: '.layer-2',\n  scale: [1, 1.3, 1],\n  boxShadow: ['0 0 20px #a55eea40', '0 0 40px #a55eea80', '0 0 20px #a55eea40'],\n  duration: 400,\n  delay: anime.stagger(50)\n}, 4600);\n\n// Signals to output\ntl.add({\n  targets: [signalEls[10], signalEls[11]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [630, 880],\n  top: (el, i) => [150 + i * 100, 180 + i * 70],\n  duration: 800,\n  ease: 'linear'\n}, 5000);\n\ntl.add({\n  targets: '.layer-3',\n  scale: [1, 1.4, 1],\n  boxShadow: ['0 0 20px #26de8140', '0 0 50px #26de81', '0 0 20px #26de8140'],\n  duration: 500\n}, 5600);\n\n// Phase 4: Show error bar\ntl.add({\n  targets: '.error-bar',\n  opacity: [0, 1],\n  translateX: [20, 0],\n  duration: 500\n}, 6200);\n\ntl.add({\n  targets: '.error-label',\n  opacity: [0, 1],\n  duration: 400\n}, 6400);\n\n// Phase 5: Backpropagation - connections light up in reverse, error decreases\n// First iteration\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff20', '#ff6b9d80', '#ffffff30'],\n  strokeWidth: [2, 4, 2],\n  duration: 1000,\n  delay: anime.stagger(5, { direction: 'reverse' })\n}, 7000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['90%', '70%'],\n  duration: 800,\n  ease: 'outQuad'\n}, 7500);\n\n// Second forward pass\ntl.add({\n  targets: [signalEls[12], signalEls[13], signalEls[14], signalEls[15]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 880],\n  duration: 1200,\n  ease: 'linear'\n}, 8500);\n\ntl.add({\n  targets: '.neuron',\n  scale: [1, 1.15, 1],\n  duration: 300,\n  delay: anime.stagger(40)\n}, 8800);\n\n// Second backprop\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff30', '#a55eea80', '#ffffff40'],\n  strokeWidth: [2, 3, 2],\n  duration: 800,\n  delay: anime.stagger(5, { direction: 'reverse' })\n}, 10000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['70%', '45%'],\n  duration: 800,\n  ease: 'outQuad'\n}, 10500);\n\n// Third iteration - faster\ntl.add({\n  targets: [signalEls[16], signalEls[17]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 880],\n  top: [150, 215],\n  duration: 800,\n  ease: 'linear'\n}, 11500);\n\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff40', '#26de8160', '#ffffff50'],\n  duration: 600,\n  delay: anime.stagger(3, { direction: 'reverse' })\n}, 12300);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['45%', '20%'],\n  duration: 600,\n  ease: 'outQuad'\n}, 12600);\n\n// Phase 6: Final state - network learned!\ntl.add({\n  targets: '.connection',\n  stroke: '#26de8150',\n  strokeWidth: 3,\n  duration: 800\n}, 13500);\n\ntl.add({\n  targets: '.neuron',\n  boxShadow: (el) => {\n    const color = el.classList.contains('layer-0') ? '#4fc3f7' : \n                  el.classList.contains('layer-3') ? '#26de81' : '#a55eea';\n    return `0 0 30px ${color}80`;\n  },\n  duration: 1000\n}, 14000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['20%', '5%'],\n  background: 'linear-gradient(to top, #26de81, #26de81)',\n  duration: 1000,\n  ease: 'outQuad'\n}, 14500);\n\n// Celebration pulse\ntl.add({\n  targets: '.layer-3',\n  scale: [1, 1.5, 1],\n  duration: 600,\n  ease: 'outElastic'\n}, 16000);\n\n// Final glow\ntl.add({\n  targets: '.neuron',\n  scale: [1, 1.1],\n  duration: 2000,\n  direction: 'alternate',\n  loop: 2,\n  ease: 'inOutSine'\n}, 17000);\n\nreturn tl;",
  "cleanup": "const elements = stage.querySelectorAll('.element');\nelements.forEach(el => el.remove());\nconst svg = stage.querySelector('svg');\nif (svg) svg.remove();"
}
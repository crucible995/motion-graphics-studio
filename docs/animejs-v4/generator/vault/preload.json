[
  {
    "id": 1769309815847,
    "topic": "DNA replication",
    "duration": 15,
    "sequences": "dynamic",
    "timestamp": 1769309815847,
    "title": "The Dance of DNA Replication",
    "narration": "Every time a cell divides, it must copy its entire genetic code. The DNA double helix unzips like a zipper, and specialized molecular machines read each strand, building perfect copies nucleotide by nucleotide. In just hours, 3 billion base pairs are duplicated with astonishing accuracy.",
    "setup": "const elements = [];\n\n// Create the background glow\nconst bgGlow = document.createElement('div');\nbgGlow.className = 'bg-glow';\nbgGlow.style.cssText = 'position:absolute;width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(79,195,247,0.2) 0%,transparent 70%);left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none;';\nstage.appendChild(bgGlow);\nelements.push(bgGlow);\n\n// Create DNA helix strands\nconst helixContainer = document.createElement('div');\nhelixContainer.className = 'helix-container';\nhelixContainer.style.cssText = 'position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:400px;height:200px;';\nstage.appendChild(helixContainer);\nelements.push(helixContainer);\n\n// Base pair colors\nconst baseColors = {\n  A: '#ff6b9d',\n  T: '#fed330',\n  G: '#26de81',\n  C: '#4fc3f7'\n};\n\nconst basePairs = ['AT', 'GC', 'TA', 'CG', 'AT', 'GC', 'CG', 'TA'];\nconst nucleotides = [];\n\n// Create base pairs along the helix\nbasePairs.forEach((pair, i) => {\n  const leftBase = document.createElement('div');\n  leftBase.className = 'nucleotide left-strand';\n  leftBase.dataset.index = i;\n  const leftColor = baseColors[pair[0]];\n  leftBase.style.cssText = `position:absolute;width:20px;height:20px;border-radius:50%;background:${leftColor};left:${140 + i * 20}px;top:80px;opacity:0;box-shadow:0 0 10px ${leftColor};`;\n  helixContainer.appendChild(leftBase);\n  nucleotides.push(leftBase);\n  \n  const rightBase = document.createElement('div');\n  rightBase.className = 'nucleotide right-strand';\n  rightBase.dataset.index = i;\n  const rightColor = baseColors[pair[1]];\n  rightBase.style.cssText = `position:absolute;width:20px;height:20px;border-radius:50%;background:${rightColor};left:${140 + i * 20}px;top:100px;opacity:0;box-shadow:0 0 10px ${rightColor};`;\n  helixContainer.appendChild(rightBase);\n  nucleotides.push(rightBase);\n  \n  // Hydrogen bonds between pairs\n  const bond = document.createElement('div');\n  bond.className = 'h-bond';\n  bond.dataset.index = i;\n  bond.style.cssText = `position:absolute;width:3px;height:0px;background:rgba(255,255,255,0.6);left:${149 + i * 20}px;top:98px;opacity:0;border-radius:2px;`;\n  helixContainer.appendChild(bond);\n  elements.push(bond);\n});\n\n// Create helicase enzyme (the unzipper)\nconst helicase = document.createElement('div');\nhelicase.className = 'helicase';\nhelicase.style.cssText = 'position:absolute;width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#a55eea 0%,#8854d0 100%);left:100px;top:70px;opacity:0;box-shadow:0 0 20px rgba(165,94,234,0.6);display:flex;align-items:center;justify-content:center;';\nconst helicaseInner = document.createElement('div');\nhelicaseInner.style.cssText = 'width:20px;height:20px;border-radius:50%;background:rgba(255,255,255,0.3);';\nhelicase.appendChild(helicaseInner);\nhelixContainer.appendChild(helicase);\nelements.push(helicase);\n\n// Create DNA polymerase enzymes\nconst polymeraseTop = document.createElement('div');\npolymeraseTop.className = 'polymerase-top';\npolymeraseTop.style.cssText = 'position:absolute;width:35px;height:25px;border-radius:12px;background:linear-gradient(135deg,#ff9f43 0%,#ee5a24 100%);left:100px;top:50px;opacity:0;box-shadow:0 0 15px rgba(255,159,67,0.6);';\nhelixContainer.appendChild(polymeraseTop);\nelements.push(polymeraseTop);\n\nconst polymeraseBottom = document.createElement('div');\npolymeraseBottom.className = 'polymerase-bottom';\npolymeraseBottom.style.cssText = 'position:absolute;width:35px;height:25px;border-radius:12px;background:linear-gradient(135deg,#ff9f43 0%,#ee5a24 100%);left:100px;top:125px;opacity:0;box-shadow:0 0 15px rgba(255,159,67,0.6);';\nhelixContainer.appendChild(polymeraseBottom);\nelements.push(polymeraseBottom);\n\n// Create new nucleotides (copies)\nconst newNucleotides = [];\nbasePairs.forEach((pair, i) => {\n  const newTop = document.createElement('div');\n  newTop.className = 'new-nucleotide new-top';\n  const topColor = baseColors[pair[1]];\n  newTop.style.cssText = `position:absolute;width:16px;height:16px;border-radius:50%;background:${topColor};left:${142 + i * 20}px;top:55px;opacity:0;box-shadow:0 0 8px ${topColor};transform:scale(0);`;\n  helixContainer.appendChild(newTop);\n  newNucleotides.push(newTop);\n  \n  const newBottom = document.createElement('div');\n  newBottom.className = 'new-nucleotide new-bottom';\n  const bottomColor = baseColors[pair[0]];\n  newBottom.style.cssText = `position:absolute;width:16px;height:16px;border-radius:50%;background:${bottomColor};left:${142 + i * 20}px;top:130px;opacity:0;box-shadow:0 0 8px ${bottomColor};transform:scale(0);`;\n  helixContainer.appendChild(newBottom);\n  newNucleotides.push(newBottom);\n});\n\n// Labels\nconst helicaseLabel = document.createElement('div');\nhelicaseLabel.className = 'label helicase-label';\nhelicaseLabel.textContent = 'Helicase';\nhelicaseLabel.style.cssText = 'position:absolute;left:85px;top:35px;color:#a55eea;font-size:11px;font-weight:bold;opacity:0;text-shadow:0 0 10px rgba(165,94,234,0.8);';\nhelixContainer.appendChild(helicaseLabel);\nelements.push(helicaseLabel);\n\nconst polyLabel = document.createElement('div');\npolyLabel.className = 'label poly-label';\npolyLabel.textContent = 'DNA Polymerase';\npolyLabel.style.cssText = 'position:absolute;left:240px;top:155px;color:#ff9f43;font-size:11px;font-weight:bold;opacity:0;text-shadow:0 0 10px rgba(255,159,67,0.8);';\nhelixContainer.appendChild(polyLabel);\nelements.push(polyLabel);\n\nconst titleLabel = document.createElement('div');\ntitleLabel.className = 'title-label';\ntitleLabel.textContent = 'DNA REPLICATION';\ntitleLabel.style.cssText = 'position:absolute;left:50%;top:20px;transform:translateX(-50%);color:white;font-size:16px;font-weight:bold;opacity:0;letter-spacing:3px;text-shadow:0 0 20px rgba(79,195,247,0.8);';\nstage.appendChild(titleLabel);\nelements.push(titleLabel);\n\nwindow._dnaElements = elements.concat(nucleotides, newNucleotides);",
    "animation": "const tl = anime.createTimeline({\n  defaults: {\n    ease: 'outExpo'\n  }\n});\n\n// Phase 1: Title and DNA appears\ntl.add({\n  targets: '.title-label',\n  opacity: [0, 1],\n  translateY: [-20, 0],\n  duration: 800\n}, 0);\n\ntl.add({\n  targets: '.nucleotide',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(80)\n}, 200);\n\ntl.add({\n  targets: '.h-bond',\n  opacity: [0, 0.6],\n  height: [0, 20],\n  duration: 400,\n  delay: anime.stagger(80)\n}, 800);\n\n// Phase 2: Helicase appears and starts moving\ntl.add({\n  targets: '.helicase',\n  opacity: [0, 1],\n  scale: [0.5, 1],\n  duration: 600,\n  ease: 'outBack'\n}, 1800);\n\ntl.add({\n  targets: '.helicase-label',\n  opacity: [0, 1],\n  duration: 400\n}, 2200);\n\n// Helicase rotation animation\ntl.add({\n  targets: '.helicase',\n  rotate: 360,\n  duration: 2000,\n  ease: 'linear'\n}, 2400);\n\n// Phase 3: Helicase moves and unzips DNA\ntl.add({\n  targets: '.helicase',\n  left: 280,\n  duration: 4000,\n  ease: 'linear'\n}, 2800);\n\n// Strands separate as helicase passes\ntl.add({\n  targets: '.left-strand',\n  top: 60,\n  duration: 600,\n  delay: anime.stagger(400, {start: 0}),\n  ease: 'outQuad'\n}, 3200);\n\ntl.add({\n  targets: '.right-strand',\n  top: 120,\n  duration: 600,\n  delay: anime.stagger(400, {start: 0}),\n  ease: 'outQuad'\n}, 3200);\n\n// Bonds break\ntl.add({\n  targets: '.h-bond',\n  opacity: 0,\n  height: 0,\n  duration: 300,\n  delay: anime.stagger(400, {start: 0})\n}, 3200);\n\n// Phase 4: Polymerases appear\ntl.add({\n  targets: '.polymerase-top',\n  opacity: [0, 1],\n  scale: [0.5, 1],\n  left: 140,\n  duration: 500,\n  ease: 'outBack'\n}, 5000);\n\ntl.add({\n  targets: '.polymerase-bottom',\n  opacity: [0, 1],\n  scale: [0.5, 1],\n  left: 140,\n  duration: 500,\n  ease: 'outBack'\n}, 5200);\n\ntl.add({\n  targets: '.poly-label',\n  opacity: [0, 1],\n  duration: 400\n}, 5500);\n\n// Phase 5: Polymerases move and add new nucleotides\ntl.add({\n  targets: '.polymerase-top',\n  left: 300,\n  duration: 5000,\n  ease: 'linear'\n}, 6000);\n\ntl.add({\n  targets: '.polymerase-bottom',\n  left: 300,\n  duration: 5000,\n  ease: 'linear'\n}, 6000);\n\n// New nucleotides appear as polymerase passes\ntl.add({\n  targets: '.new-top',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 400,\n  delay: anime.stagger(500, {start: 0}),\n  ease: 'outBack'\n}, 6500);\n\ntl.add({\n  targets: '.new-bottom',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 400,\n  delay: anime.stagger(500, {start: 0}),\n  ease: 'outBack'\n}, 6700);\n\n// Phase 6: Final glow effect showing complete replication\ntl.add({\n  targets: '.bg-glow',\n  scale: [1, 1.5],\n  opacity: [0.2, 0.4],\n  duration: 1000,\n  ease: 'outQuad'\n}, 12000);\n\ntl.add({\n  targets: '.nucleotide, .new-nucleotide',\n  boxShadow: ['0 0 10px currentColor', '0 0 20px currentColor', '0 0 10px currentColor'],\n  duration: 1500,\n  ease: 'inOutSine'\n}, 12500);\n\n// Fade helicase label as it moves away\ntl.add({\n  targets: '.helicase-label',\n  opacity: 0,\n  duration: 500\n}, 5000);\n\nreturn tl;",
    "cleanup": "if (window._dnaElements) {\n  window._dnaElements.forEach(el => {\n    if (el && el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n  });\n  delete window._dnaElements;\n}"
  },
  {
    "id": 1769309855343,
    "topic": "how neurons fire",
    "duration": 18,
    "sequences": "dynamic",
    "timestamp": 1769309855343,
    "title": "The Spark of Thought: How Neurons Fire",
    "narration": "Your brain contains 86 billion neurons, each one a tiny biological computer. When a neuron receives enough signals from its neighbors, it fires an electrical impulse called an action potential – a wave of charge that races down its length at 270 miles per hour, passing the message to the next neuron in the chain.",
    "setup": "const colors = { blue: '#4fc3f7', darkBlue: '#29b6f6', orange: '#ff9f43', pink: '#ff6b9d', purple: '#a55eea', yellow: '#fed330', green: '#26de81', bg: '#1a1a2e' };\n\n// Create neuron body (soma)\nconst soma = document.createElement('div');\nsoma.className = 'element neuron-soma';\nObject.assign(soma.style, { position: 'absolute', width: '80px', height: '80px', borderRadius: '50%', background: `radial-gradient(circle at 30% 30%, ${colors.blue}, ${colors.darkBlue})`, left: '80px', top: '160px', boxShadow: `0 0 30px ${colors.blue}40` });\nstage.appendChild(soma);\n\n// Create nucleus\nconst nucleus = document.createElement('div');\nnucleus.className = 'element nucleus';\nObject.assign(nucleus.style, { position: 'absolute', width: '30px', height: '30px', borderRadius: '50%', background: colors.purple, left: '105px', top: '185px', opacity: '0.9' });\nstage.appendChild(nucleus);\n\n// Create dendrites\nconst dendriteData = [{x: 40, y: 140, rot: -45}, {x: 30, y: 170, rot: -20}, {x: 35, y: 200, rot: 20}, {x: 45, y: 225, rot: 40}];\ndendriteData.forEach((d, i) => { const dendrite = document.createElement('div'); dendrite.className = 'element dendrite'; Object.assign(dendrite.style, { position: 'absolute', width: '50px', height: '6px', borderRadius: '3px', background: colors.blue, left: d.x + 'px', top: d.y + 'px', transform: `rotate(${d.rot}deg)`, opacity: '0' }); stage.appendChild(dendrite); });\n\n// Create axon\nconst axon = document.createElement('div');\naxon.className = 'element axon';\nObject.assign(axon.style, { position: 'absolute', width: '280px', height: '8px', borderRadius: '4px', background: `linear-gradient(90deg, ${colors.darkBlue}, ${colors.blue})`, left: '150px', top: '196px', transformOrigin: 'left center', scaleX: '0' });\nstage.appendChild(axon);\n\n// Create myelin sheaths\nfor(let i = 0; i < 5; i++) { const myelin = document.createElement('div'); myelin.className = 'element myelin'; Object.assign(myelin.style, { position: 'absolute', width: '35px', height: '20px', borderRadius: '10px', background: colors.purple, left: (175 + i * 52) + 'px', top: '190px', opacity: '0' }); stage.appendChild(myelin); }\n\n// Create axon terminal\nconst terminal = document.createElement('div');\nterminal.className = 'element terminal';\nObject.assign(terminal.style, { position: 'absolute', width: '50px', height: '50px', borderRadius: '50%', background: `radial-gradient(circle at 30% 30%, ${colors.orange}, ${colors.pink})`, left: '420px', top: '175px', opacity: '0' });\nstage.appendChild(terminal);\n\n// Create signal particles\nfor(let i = 0; i < 8; i++) { const signal = document.createElement('div'); signal.className = 'element signal'; Object.assign(signal.style, { position: 'absolute', width: '12px', height: '12px', borderRadius: '50%', background: colors.yellow, left: '115px', top: '194px', opacity: '0', boxShadow: `0 0 15px ${colors.yellow}` }); stage.appendChild(signal); }\n\n// Create incoming signals on dendrites\nfor(let i = 0; i < 4; i++) { const incoming = document.createElement('div'); incoming.className = 'element incoming'; Object.assign(incoming.style, { position: 'absolute', width: '10px', height: '10px', borderRadius: '50%', background: colors.green, left: '0px', top: (150 + i * 25) + 'px', opacity: '0', boxShadow: `0 0 10px ${colors.green}` }); stage.appendChild(incoming); }\n\n// Create neurotransmitters\nfor(let i = 0; i < 6; i++) { const neuro = document.createElement('div'); neuro.className = 'element neurotransmitter'; Object.assign(neuro.style, { position: 'absolute', width: '8px', height: '8px', borderRadius: '50%', background: colors.pink, left: '445px', top: '200px', opacity: '0' }); stage.appendChild(neuro); }\n\n// Create second neuron hint\nconst nextNeuron = document.createElement('div');\nnextNeuron.className = 'element next-neuron';\nObject.assign(nextNeuron.style, { position: 'absolute', width: '60px', height: '60px', borderRadius: '50%', background: `radial-gradient(circle at 30% 30%, ${colors.blue}80, ${colors.darkBlue}80)`, left: '520px', top: '170px', opacity: '0' });\nstage.appendChild(nextNeuron);\n\n// Create labels\nconst labels = [{text: 'DENDRITES', x: 10, y: 260}, {text: 'SOMA', x: 85, y: 250}, {text: 'AXON', x: 270, y: 220}, {text: 'SYNAPSE', x: 460, y: 240}];\nlabels.forEach(l => { const label = document.createElement('div'); label.className = 'element label'; label.textContent = l.text; Object.assign(label.style, { position: 'absolute', color: 'white', fontSize: '11px', fontWeight: 'bold', letterSpacing: '1px', left: l.x + 'px', top: l.y + 'px', opacity: '0', fontFamily: 'system-ui, sans-serif' }); stage.appendChild(label); });",
    "animation": "const tl = anime.createTimeline({ defaults: { ease: 'outExpo' } });\n\n// Sequence 1: Neuron appears\ntl.add({ targets: '.neuron-soma', scale: [0, 1], opacity: [0, 1], duration: 800 }, 0);\ntl.add({ targets: '.nucleus', scale: [0, 1], opacity: [0, 0.9], duration: 600 }, 200);\ntl.add({ targets: '.dendrite', opacity: [0, 1], scaleX: [0, 1], duration: 500, delay: anime.stagger(100) }, 400);\ntl.add({ targets: '.label', opacity: [0, 1], translateY: [10, 0], duration: 400, delay: anime.stagger(150, {start: 0}) }, 800);\n\n// Sequence 2: Axon grows out\ntl.add({ targets: '.axon', scaleX: [0, 1], duration: 1000, ease: 'inOutQuad' }, 1500);\ntl.add({ targets: '.myelin', opacity: [0, 0.8], scale: [0.5, 1], duration: 400, delay: anime.stagger(80) }, 2000);\ntl.add({ targets: '.terminal', opacity: [0, 1], scale: [0, 1], duration: 600 }, 2800);\n\n// Sequence 3: Incoming signals arrive at dendrites\ntl.add({ targets: '.incoming', opacity: [0, 1], duration: 300 }, 3500);\ntl.add({ targets: '.incoming', translateX: [0, 40], opacity: [1, 0], duration: 800, delay: anime.stagger(100), ease: 'inQuad' }, 3800);\n\n// Sequence 4: Soma lights up (threshold reached)\ntl.add({ targets: '.neuron-soma', boxShadow: [`0 0 30px ${colors.blue}40`, `0 0 60px ${colors.yellow}`, `0 0 30px ${colors.blue}40`], duration: 600, ease: 'outQuad' }, 4800);\ntl.add({ targets: '.neuron-soma', background: [`radial-gradient(circle at 30% 30%, ${colors.blue}, ${colors.darkBlue})`, `radial-gradient(circle at 30% 30%, ${colors.yellow}, ${colors.orange})`, `radial-gradient(circle at 30% 30%, ${colors.blue}, ${colors.darkBlue})`], duration: 800 }, 4800);\n\n// Sequence 5: Action potential travels down axon\nconst signals = document.querySelectorAll('.signal');\nsignals.forEach((sig, i) => { tl.add({ targets: sig, opacity: [0, 1, 1, 0], translateX: [0, 50, 200, 320], duration: 1800, ease: 'linear' }, 5800 + i * 150); });\n\n// Myelin sheaths pulse as signal passes\ntl.add({ targets: '.myelin', scale: [1, 1.2, 1], opacity: [0.8, 1, 0.8], duration: 400, delay: anime.stagger(150) }, 6200);\n\n// Sequence 6: Terminal activates\ntl.add({ targets: '.terminal', scale: [1, 1.3, 1], boxShadow: [`0 0 0px ${colors.orange}`, `0 0 40px ${colors.yellow}`, `0 0 20px ${colors.orange}`], duration: 800 }, 8500);\n\n// Sequence 7: Neurotransmitters release\nconst neurotransmitters = document.querySelectorAll('.neurotransmitter');\nneurotransmitters.forEach((n, i) => { const angle = (i - 2.5) * 15; const rad = angle * Math.PI / 180; tl.add({ targets: n, opacity: [0, 1], translateX: [0, Math.cos(rad) * 60 + 20], translateY: [0, Math.sin(rad) * 40 - 10], duration: 1000, ease: 'outQuad' }, 9300 + i * 80); });\n\n// Sequence 8: Next neuron receives signal\ntl.add({ targets: '.next-neuron', opacity: [0, 0.6], scale: [0.8, 1], duration: 800 }, 10000);\ntl.add({ targets: '.neurotransmitter', opacity: [1, 0], duration: 500 }, 11000);\ntl.add({ targets: '.next-neuron', boxShadow: [`0 0 0px ${colors.blue}`, `0 0 50px ${colors.yellow}`, `0 0 20px ${colors.blue}`], scale: [1, 1.1, 1], duration: 1000 }, 11500);\n\n// Sequence 9: Second wave - repeat firing\ntl.add({ targets: '.incoming', translateX: 0, opacity: [0, 1], duration: 300 }, 13000);\ntl.add({ targets: '.incoming', translateX: [0, 40], opacity: [1, 0], duration: 600, delay: anime.stagger(80) }, 13300);\ntl.add({ targets: '.neuron-soma', boxShadow: [`0 0 30px ${colors.blue}40`, `0 0 50px ${colors.yellow}`], duration: 400 }, 14000);\nsignals.forEach((sig, i) => { if(i < 4) { tl.add({ targets: sig, opacity: [0, 1, 1, 0], translateX: [0, 100, 250, 320], duration: 1400, ease: 'linear' }, 14200 + i * 100); } });\ntl.add({ targets: '.terminal', scale: [1, 1.2, 1], duration: 600 }, 15800);\n\n// Final: Everything pulses gently\ntl.add({ targets: ['.neuron-soma', '.terminal', '.next-neuron'], scale: [1, 1.05, 1], duration: 1500, ease: 'inOutSine', loop: 1 }, 16500);\n\nreturn tl;",
    "cleanup": "document.querySelectorAll('.neuron-soma, .nucleus, .dendrite, .axon, .myelin, .terminal, .signal, .incoming, .neurotransmitter, .next-neuron, .label').forEach(el => el.remove());"
  },
  {
    "id": 1769309770139,
    "topic": "neural network learning",
    "duration": 20,
    "sequences": "dynamic",
    "timestamp": 1769309770139,
    "title": "How Neural Networks Learn",
    "narration": "Neural networks learn by sending signals through layers of neurons, adjusting the strength of connections based on errors. Like a sculptor refining clay, the network gradually shapes itself until it can recognize patterns and make predictions with remarkable accuracy.",
    "setup": "const neurons = [];\nconst connections = [];\nconst signals = [];\n\n// Create 3 layers of neurons\nconst layers = [\n  { count: 4, x: 150, color: '#4fc3f7' },\n  { count: 6, x: 400, color: '#a55eea' },\n  { count: 6, x: 650, color: '#a55eea' },\n  { count: 2, x: 900, color: '#26de81' }\n];\n\nlayers.forEach((layer, layerIndex) => {\n  const startY = (500 - (layer.count - 1) * 70) / 2;\n  for (let i = 0; i < layer.count; i++) {\n    const neuron = document.createElement('div');\n    neuron.className = 'element neuron layer-' + layerIndex;\n    neuron.style.cssText = `\n      position: absolute;\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background: ${layer.color};\n      left: ${layer.x}px;\n      top: ${startY + i * 70}px;\n      opacity: 0;\n      transform: scale(0);\n      box-shadow: 0 0 20px ${layer.color}40;\n    `;\n    stage.appendChild(neuron);\n    neurons.push({ el: neuron, x: layer.x + 20, y: startY + i * 70 + 20, layer: layerIndex });\n  }\n});\n\n// Create connections between layers\nconst svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\nsvg.style.cssText = 'position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none;';\nstage.insertBefore(svg, stage.firstChild);\n\nneurons.forEach((n1, i) => {\n  neurons.forEach((n2, j) => {\n    if (n2.layer === n1.layer + 1) {\n      const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n      line.setAttribute('x1', n1.x);\n      line.setAttribute('y1', n1.y);\n      line.setAttribute('x2', n2.x);\n      line.setAttribute('y2', n2.y);\n      line.setAttribute('stroke', '#ffffff20');\n      line.setAttribute('stroke-width', '2');\n      line.classList.add('connection');\n      svg.appendChild(line);\n      connections.push({ el: line, from: n1, to: n2 });\n    }\n  });\n});\n\n// Create signal particles\nfor (let i = 0; i < 20; i++) {\n  const signal = document.createElement('div');\n  signal.className = 'element signal signal-' + i;\n  signal.style.cssText = `\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    border-radius: 50%;\n    background: #fed330;\n    box-shadow: 0 0 15px #fed330;\n    opacity: 0;\n    transform: scale(0);\n    z-index: 10;\n  `;\n  stage.appendChild(signal);\n  signals.push(signal);\n}\n\n// Create labels\nconst inputLabel = document.createElement('div');\ninputLabel.className = 'element label input-label';\ninputLabel.textContent = 'INPUT';\ninputLabel.style.cssText = 'position: absolute; left: 120px; top: 420px; color: #4fc3f7; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(inputLabel);\n\nconst hiddenLabel = document.createElement('div');\nhiddenLabel.className = 'element label hidden-label';\nhiddenLabel.textContent = 'HIDDEN LAYERS';\nhiddenLabel.style.cssText = 'position: absolute; left: 460px; top: 420px; color: #a55eea; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(hiddenLabel);\n\nconst outputLabel = document.createElement('div');\noutputLabel.className = 'element label output-label';\noutputLabel.textContent = 'OUTPUT';\noutputLabel.style.cssText = 'position: absolute; left: 865px; top: 420px; color: #26de81; font-size: 14px; font-weight: bold; opacity: 0; letter-spacing: 2px;';\nstage.appendChild(outputLabel);\n\n// Error indicator\nconst errorBar = document.createElement('div');\nerrorBar.className = 'element error-bar';\nerrorBar.style.cssText = 'position: absolute; right: 50px; top: 100px; width: 20px; height: 200px; background: #2d3436; border-radius: 10px; opacity: 0; overflow: hidden;';\nstage.appendChild(errorBar);\n\nconst errorFill = document.createElement('div');\nerrorFill.className = 'element error-fill';\nerrorFill.style.cssText = 'position: absolute; bottom: 0; left: 0; width: 100%; height: 90%; background: linear-gradient(to top, #26de81, #fed330, #ff6b9d); border-radius: 10px;';\nerrorBar.appendChild(errorFill);\n\nconst errorLabel = document.createElement('div');\nerrorLabel.className = 'element error-label';\nerrorLabel.textContent = 'ERROR';\nerrorLabel.style.cssText = 'position: absolute; right: 45px; top: 310px; color: #ff6b9d; font-size: 12px; font-weight: bold; opacity: 0; letter-spacing: 1px;';\nstage.appendChild(errorLabel);",
    "animation": "const tl = anime.createTimeline({\n  defaults: { ease: 'outExpo' }\n});\n\n// Phase 1: Neurons appear layer by layer\ntl.add({\n  targets: '.layer-0',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(80)\n}, 0);\n\ntl.add({\n  targets: '.layer-1',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(60)\n}, 400);\n\ntl.add({\n  targets: '.layer-2',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(60)\n}, 800);\n\ntl.add({\n  targets: '.layer-3',\n  opacity: [0, 1],\n  scale: [0, 1],\n  duration: 600,\n  delay: anime.stagger(100)\n}, 1200);\n\n// Phase 2: Connections fade in\ntl.add({\n  targets: '.connection',\n  opacity: [0, 0.3],\n  duration: 800,\n  delay: anime.stagger(10)\n}, 1500);\n\n// Labels appear\ntl.add({\n  targets: '.input-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2000);\n\ntl.add({\n  targets: '.hidden-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2200);\n\ntl.add({\n  targets: '.output-label',\n  opacity: [0, 1],\n  translateY: [10, 0],\n  duration: 500\n}, 2400);\n\n// Phase 3: First forward pass - signals travel through network\nconst signalEls = document.querySelectorAll('.signal');\nlet signalIndex = 0;\n\n// Signals from input to first hidden\ntl.add({\n  targets: [signalEls[0], signalEls[1], signalEls[2], signalEls[3]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 380],\n  top: (el, i) => [80 + i * 70, 45 + i * 50],\n  duration: 800,\n  ease: 'linear'\n}, 3000);\n\n// Neurons pulse when receiving signal\ntl.add({\n  targets: '.layer-1',\n  scale: [1, 1.3, 1],\n  boxShadow: ['0 0 20px #a55eea40', '0 0 40px #a55eea80', '0 0 20px #a55eea40'],\n  duration: 400,\n  delay: anime.stagger(50)\n}, 3600);\n\n// Signals to second hidden\ntl.add({\n  targets: [signalEls[4], signalEls[5], signalEls[6], signalEls[7], signalEls[8], signalEls[9]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [380, 630],\n  top: (el, i) => [45 + i * 50, 45 + i * 50],\n  duration: 800,\n  ease: 'linear'\n}, 4000);\n\ntl.add({\n  targets: '.layer-2',\n  scale: [1, 1.3, 1],\n  boxShadow: ['0 0 20px #a55eea40', '0 0 40px #a55eea80', '0 0 20px #a55eea40'],\n  duration: 400,\n  delay: anime.stagger(50)\n}, 4600);\n\n// Signals to output\ntl.add({\n  targets: [signalEls[10], signalEls[11]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [630, 880],\n  top: (el, i) => [150 + i * 100, 180 + i * 70],\n  duration: 800,\n  ease: 'linear'\n}, 5000);\n\ntl.add({\n  targets: '.layer-3',\n  scale: [1, 1.4, 1],\n  boxShadow: ['0 0 20px #26de8140', '0 0 50px #26de81', '0 0 20px #26de8140'],\n  duration: 500\n}, 5600);\n\n// Phase 4: Show error bar\ntl.add({\n  targets: '.error-bar',\n  opacity: [0, 1],\n  translateX: [20, 0],\n  duration: 500\n}, 6200);\n\ntl.add({\n  targets: '.error-label',\n  opacity: [0, 1],\n  duration: 400\n}, 6400);\n\n// Phase 5: Backpropagation - connections light up in reverse, error decreases\n// First iteration\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff20', '#ff6b9d80', '#ffffff30'],\n  strokeWidth: [2, 4, 2],\n  duration: 1000,\n  delay: anime.stagger(5, { direction: 'reverse' })\n}, 7000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['90%', '70%'],\n  duration: 800,\n  ease: 'outQuad'\n}, 7500);\n\n// Second forward pass\ntl.add({\n  targets: [signalEls[12], signalEls[13], signalEls[14], signalEls[15]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 880],\n  duration: 1200,\n  ease: 'linear'\n}, 8500);\n\ntl.add({\n  targets: '.neuron',\n  scale: [1, 1.15, 1],\n  duration: 300,\n  delay: anime.stagger(40)\n}, 8800);\n\n// Second backprop\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff30', '#a55eea80', '#ffffff40'],\n  strokeWidth: [2, 3, 2],\n  duration: 800,\n  delay: anime.stagger(5, { direction: 'reverse' })\n}, 10000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['70%', '45%'],\n  duration: 800,\n  ease: 'outQuad'\n}, 10500);\n\n// Third iteration - faster\ntl.add({\n  targets: [signalEls[16], signalEls[17]],\n  opacity: [0, 1, 1, 0],\n  scale: [0, 1, 1, 0],\n  left: [130, 880],\n  top: [150, 215],\n  duration: 800,\n  ease: 'linear'\n}, 11500);\n\ntl.add({\n  targets: '.connection',\n  stroke: ['#ffffff40', '#26de8160', '#ffffff50'],\n  duration: 600,\n  delay: anime.stagger(3, { direction: 'reverse' })\n}, 12300);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['45%', '20%'],\n  duration: 600,\n  ease: 'outQuad'\n}, 12600);\n\n// Phase 6: Final state - network learned!\ntl.add({\n  targets: '.connection',\n  stroke: '#26de8150',\n  strokeWidth: 3,\n  duration: 800\n}, 13500);\n\ntl.add({\n  targets: '.neuron',\n  boxShadow: (el) => {\n    const color = el.classList.contains('layer-0') ? '#4fc3f7' : \n                  el.classList.contains('layer-3') ? '#26de81' : '#a55eea';\n    return `0 0 30px ${color}80`;\n  },\n  duration: 1000\n}, 14000);\n\ntl.add({\n  targets: '.error-fill',\n  height: ['20%', '5%'],\n  background: 'linear-gradient(to top, #26de81, #26de81)',\n  duration: 1000,\n  ease: 'outQuad'\n}, 14500);\n\n// Celebration pulse\ntl.add({\n  targets: '.layer-3',\n  scale: [1, 1.5, 1],\n  duration: 600,\n  ease: 'outElastic'\n}, 16000);\n\n// Final glow\ntl.add({\n  targets: '.neuron',\n  scale: [1, 1.1],\n  duration: 2000,\n  direction: 'alternate',\n  loop: 2,\n  ease: 'inOutSine'\n}, 17000);\n\nreturn tl;",
    "cleanup": "const elements = stage.querySelectorAll('.element');\nelements.forEach(el => el.remove());\nconst svg = stage.querySelector('svg');\nif (svg) svg.remove();"
  },
  {
    "id": 1769309900338,
    "topic": "photosynthesis",
    "duration": 15,
    "sequences": "dynamic",
    "timestamp": 1769309900338,
    "title": "The Magic of Photosynthesis",
    "narration": "Plants are nature's solar panels. They capture sunlight, absorb carbon dioxide from the air, and drink water from the soil. Through photosynthesis, they transform these simple ingredients into glucose - their food - while releasing oxygen as a gift to the world.",
    "setup": "const leaf = document.createElement('div'); leaf.className = 'element leaf'; leaf.style.cssText = 'position: absolute; left: 50%; top: 50%; width: 200px; height: 120px; background: linear-gradient(135deg, #26de81 0%, #00b894 100%); border-radius: 0 80% 0 80%; transform: translate(-50%, -50%) rotate(-30deg); opacity: 0; box-shadow: inset -20px -20px 40px rgba(0,0,0,0.1);'; stage.appendChild(leaf); const leafVein = document.createElement('div'); leafVein.className = 'element vein'; leafVein.style.cssText = 'position: absolute; left: 50%; top: 50%; width: 100px; height: 4px; background: #1e8449; border-radius: 2px; transform: translate(-30%, 10px) rotate(-30deg); opacity: 0;'; stage.appendChild(leafVein); const sun = document.createElement('div'); sun.className = 'element sun'; sun.style.cssText = 'position: absolute; left: 85%; top: 15%; width: 80px; height: 80px; background: radial-gradient(circle, #fed330 0%, #ff9f43 100%); border-radius: 50%; transform: translate(-50%, -50%) scale(0); box-shadow: 0 0 60px #fed330;'; stage.appendChild(sun); for(let i = 0; i < 8; i++) { const ray = document.createElement('div'); ray.className = 'element sun-ray'; ray.style.cssText = `position: absolute; left: 85%; top: 15%; width: 40px; height: 6px; background: linear-gradient(90deg, #fed330, transparent); border-radius: 3px; transform: translate(-50%, -50%) rotate(${i * 45}deg) translateX(50px); opacity: 0;`; stage.appendChild(ray); } for(let i = 0; i < 5; i++) { const photon = document.createElement('div'); photon.className = 'element photon'; photon.style.cssText = `position: absolute; left: ${75 - i * 5}%; top: ${20 + i * 5}%; width: 12px; height: 12px; background: #fed330; border-radius: 50%; opacity: 0; box-shadow: 0 0 20px #fed330;`; stage.appendChild(photon); } for(let i = 0; i < 4; i++) { const co2 = document.createElement('div'); co2.className = 'element co2'; co2.style.cssText = `position: absolute; left: ${15 + i * 8}%; top: ${25 + (i % 2) * 10}%; opacity: 0;`; const carbon = document.createElement('div'); carbon.style.cssText = 'width: 20px; height: 20px; background: #636e72; border-radius: 50%; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);'; const o1 = document.createElement('div'); o1.style.cssText = 'width: 14px; height: 14px; background: #ff6b9d; border-radius: 50%; position: absolute; left: 0; top: 50%; transform: translate(-100%, -50%);'; const o2 = document.createElement('div'); o2.style.cssText = 'width: 14px; height: 14px; background: #ff6b9d; border-radius: 50%; position: absolute; right: 0; top: 50%; transform: translate(100%, -50%);'; co2.appendChild(o1); co2.appendChild(carbon); co2.appendChild(o2); stage.appendChild(co2); } for(let i = 0; i < 3; i++) { const h2o = document.createElement('div'); h2o.className = 'element h2o'; h2o.style.cssText = `position: absolute; left: ${35 + i * 15}%; top: 90%; opacity: 0;`; const oxygen = document.createElement('div'); oxygen.style.cssText = 'width: 18px; height: 18px; background: #4fc3f7; border-radius: 50%; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%);'; const h1 = document.createElement('div'); h1.style.cssText = 'width: 10px; height: 10px; background: #dfe6e9; border-radius: 50%; position: absolute; left: 0; top: 0; transform: translate(-50%, -50%);'; const h2 = document.createElement('div'); h2.style.cssText = 'width: 10px; height: 10px; background: #dfe6e9; border-radius: 50%; position: absolute; right: 0; top: 0; transform: translate(50%, -50%);'; h2o.appendChild(h1); h2o.appendChild(oxygen); h2o.appendChild(h2); stage.appendChild(h2o); } const chloroplast = document.createElement('div'); chloroplast.className = 'element chloroplast'; chloroplast.style.cssText = 'position: absolute; left: 50%; top: 50%; width: 60px; height: 30px; background: linear-gradient(135deg, #00b894 0%, #1e8449 100%); border-radius: 50%; transform: translate(-50%, -50%); opacity: 0; box-shadow: 0 0 20px rgba(38, 222, 129, 0.5);'; stage.appendChild(chloroplast); const glucose = document.createElement('div'); glucose.className = 'element glucose'; glucose.style.cssText = 'position: absolute; left: 50%; top: 50%; width: 40px; height: 40px; background: linear-gradient(135deg, #fed330 0%, #ff9f43 100%); border-radius: 8px; transform: translate(-50%, -50%) rotate(45deg) scale(0); box-shadow: 0 0 30px rgba(254, 211, 48, 0.6);'; stage.appendChild(glucose); for(let i = 0; i < 6; i++) { const o2 = document.createElement('div'); o2.className = 'element oxygen-out'; o2.style.cssText = `position: absolute; left: 50%; top: 50%; width: 16px; height: 16px; background: #4fc3f7; border-radius: 50%; transform: translate(-50%, -50%) scale(0); box-shadow: 0 0 15px rgba(79, 195, 247, 0.6);`; stage.appendChild(o2); } const labelSun = document.createElement('div'); labelSun.className = 'element label'; labelSun.textContent = 'Sunlight'; labelSun.style.cssText = 'position: absolute; left: 85%; top: 32%; transform: translateX(-50%); color: #fed330; font-size: 14px; font-weight: bold; opacity: 0; text-shadow: 0 0 10px rgba(0,0,0,0.5);'; stage.appendChild(labelSun); const labelCO2 = document.createElement('div'); labelCO2.className = 'element label'; labelCO2.textContent = 'CO₂'; labelCO2.style.cssText = 'position: absolute; left: 20%; top: 15%; color: #636e72; font-size: 14px; font-weight: bold; opacity: 0;'; stage.appendChild(labelCO2); const labelH2O = document.createElement('div'); labelH2O.className = 'element label'; labelH2O.textContent = 'H₂O'; labelH2O.style.cssText = 'position: absolute; left: 50%; top: 95%; transform: translateX(-50%); color: #4fc3f7; font-size: 14px; font-weight: bold; opacity: 0;'; stage.appendChild(labelH2O); const labelGlucose = document.createElement('div'); labelGlucose.className = 'element label'; labelGlucose.textContent = 'Glucose'; labelGlucose.style.cssText = 'position: absolute; left: 50%; top: 70%; transform: translateX(-50%); color: #fed330; font-size: 16px; font-weight: bold; opacity: 0; text-shadow: 0 0 10px rgba(0,0,0,0.3);'; stage.appendChild(labelGlucose); const labelO2 = document.createElement('div'); labelO2.className = 'element label'; labelO2.textContent = 'O₂ Released!'; labelO2.style.cssText = 'position: absolute; left: 50%; top: 20%; transform: translateX(-50%); color: #4fc3f7; font-size: 18px; font-weight: bold; opacity: 0; text-shadow: 0 0 15px rgba(79, 195, 247, 0.8);'; stage.appendChild(labelO2);",
    "animation": "const tl = anime.createTimeline({ defaults: { ease: 'outExpo' } }); tl.add({ targets: '.leaf', opacity: [0, 1], scale: [0.5, 1], duration: 800 }, 0); tl.add({ targets: '.vein', opacity: [0, 0.6], duration: 600 }, 400); tl.add({ targets: '.sun', scale: [0, 1], duration: 800, ease: 'outElastic' }, 600); tl.add({ targets: '.sun-ray', opacity: [0, 1], duration: 400 }, 1000); tl.add({ targets: '.sun-ray', rotate: '+=360', duration: 10000, ease: 'linear', loop: true }, 1200); tl.add({ targets: labelSun, opacity: [0, 1], translateY: [-10, 0], duration: 500 }, 1200); tl.add({ targets: '.co2', opacity: [0, 1], translateX: [-30, 0], duration: 600, delay: anime.stagger(150) }, 2000); tl.add({ targets: labelCO2, opacity: [0, 1], duration: 400 }, 2200); tl.add({ targets: '.h2o', opacity: [0, 1], translateY: [30, 0], duration: 600, delay: anime.stagger(200) }, 2800); tl.add({ targets: labelH2O, opacity: [0, 1], duration: 400 }, 3000); tl.add({ targets: '.photon', opacity: [0, 1], duration: 300, delay: anime.stagger(100) }, 3500); tl.add({ targets: '.photon', left: '50%', top: '50%', duration: 1200, ease: 'inQuad', delay: anime.stagger(100) }, 3800); tl.add({ targets: '.photon', opacity: 0, scale: 2, duration: 300, delay: anime.stagger(100) }, 4800); tl.add({ targets: '.chloroplast', opacity: [0, 1], scale: [0.5, 1.2, 1], duration: 800, ease: 'outElastic' }, 5000); tl.add({ targets: '.chloroplast', boxShadow: ['0 0 20px rgba(38, 222, 129, 0.5)', '0 0 50px rgba(38, 222, 129, 0.9)', '0 0 20px rgba(38, 222, 129, 0.5)'], duration: 1500, ease: 'inOutQuad' }, 5500); tl.add({ targets: '.co2', left: '50%', top: '50%', scale: 0.5, duration: 1500, ease: 'inOutQuad', delay: anime.stagger(100) }, 6000); tl.add({ targets: '.h2o', left: '50%', top: '50%', scale: 0.5, duration: 1500, ease: 'inOutQuad', delay: anime.stagger(100) }, 6200); tl.add({ targets: '.co2, .h2o', opacity: 0, scale: 0, duration: 400 }, 7500); tl.add({ targets: '.glucose', scale: [0, 1.3, 1], duration: 1000, ease: 'outElastic' }, 8000); tl.add({ targets: '.glucose', boxShadow: ['0 0 30px rgba(254, 211, 48, 0.6)', '0 0 60px rgba(254, 211, 48, 1)', '0 0 30px rgba(254, 211, 48, 0.6)'], duration: 1500, ease: 'inOutSine' }, 8500); tl.add({ targets: labelGlucose, opacity: [0, 1], translateY: [10, 0], duration: 600 }, 9000); const oxygenOuts = document.querySelectorAll('.oxygen-out'); oxygenOuts.forEach((o2, i) => { const angle = (i / 6) * Math.PI * 2; const radius = 120; const endX = Math.cos(angle) * radius; const endY = Math.sin(angle) * radius - 30; tl.add({ targets: o2, scale: [0, 1], duration: 400, ease: 'outBack' }, 10000 + i * 100); tl.add({ targets: o2, translateX: endX, translateY: endY, duration: 1500, ease: 'outQuad' }, 10500 + i * 100); }); tl.add({ targets: labelO2, opacity: [0, 1], scale: [0.8, 1], duration: 800, ease: 'outElastic' }, 11500); tl.add({ targets: '.oxygen-out', translateY: '-=80', opacity: [1, 0], duration: 2000, ease: 'outQuad', delay: anime.stagger(100) }, 12500); tl.add({ targets: '.chloroplast', opacity: 0, duration: 500 }, 13000); tl.add({ targets: '.leaf, .vein, .glucose, .sun, .sun-ray', scale: [1, 1.05, 1], duration: 1000, ease: 'inOutSine' }, 14000); return tl;",
    "cleanup": "document.querySelectorAll('.leaf, .vein, .sun, .sun-ray, .photon, .co2, .h2o, .chloroplast, .glucose, .oxygen-out, .label').forEach(el => el.remove());"
  }
]